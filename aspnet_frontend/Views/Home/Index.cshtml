@{
    ViewData["Title"] = "Crack Detection";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-5">
    <h2 class="mb-4">Crack Detection System</h2>

    <!-- Upload Form -->
    <form asp-action="Index" method="post" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="file" class="form-label">Upload Image</label>
            <input type="file" name="file" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-outline-secondary">Submit</button>
    </form>

    <!-- Error Message -->
    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger mt-3">@ViewBag.Error</div>
    }

    <!-- Result Section -->
    @* @if (ViewBag.Prediction != null && ViewBag.UploadedImage != null) *@
    @* { *@
    @*     <div class="row mt-4"> *@
    @*         <div class="col-md-6"> *@
    @*             <h5>Uploaded Image:</h5> *@
    @*             <img src="@ViewBag.UploadedImage" class="img-fluid border rounded shadow-sm" alt="Uploaded Image" /> *@
    @*         </div> *@
    @*         <div class="col-md-6"> *@
    @*             <h5>Prediction Result:</h5> *@
    @*             <div class="alert alert-info"> *@
    @*                 <p><strong>Status:</strong> @ViewBag.Prediction</p> *@
    @*                 <p><strong>Confidence:</strong> @((ViewBag.Confidence * 100).ToString("0.00"))%</p> *@
    @*             </div> *@
    @*         </div> *@
    @*     </div> *@
    @* } *@

    @if (ViewBag.Prediction != null && ViewBag.UploadedImage != null)
    {
        <div class="row mt-4">
            <div class="col-md-6">
                <h5>Uploaded Image:</h5>
                <img src="@ViewBag.UploadedImage" class="img-fluid border rounded shadow-sm" alt="Uploaded Image" />
            </div>
            <div class="col-md-6">
                <h5>Prediction Result:</h5>
                <div class="alert alert-info" style="background-color:azure">
                    <p>
                        <strong>Status:</strong>
                        @if (ViewBag.Prediction.ToString().ToLower() == "positive")
                        {
                            <span class="text-success">Crack Detected</span>
                        }
                        else if (ViewBag.Prediction.ToString().ToLower() == "negative")
                        {
                            <span class="text-warning">No Crack Detected</span>
                        }
                        else
                        {
                            <span>@ViewBag.Prediction</span>  <!-- fallback -->
                        }
                    </p>
                    <p><strong>Confidence:</strong> @((ViewBag.Confidence * 100).ToString("0.00"))%</p>
                </div>
            </div>
        </div>
    }


</div>
